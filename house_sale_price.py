# -*- coding: utf-8 -*-
"""House-Sale-Price.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1jsjh4wqFCIKtVG8nT4N2LlENFzM9Uj4w
"""

import streamlit as st
import pandas as pd
import joblib

st.set_page_config(page_title="üí∏ Price Prediction App", layout="centered")

st.title("üí∏ Price Prediction App")
st.markdown("Upload your **test CSV file** to predict prices using a pre-trained model.")

# Upload CSV file
uploaded_file = st.file_uploader("üìÇ Upload test CSV file", type=["csv"])

# Load trained model
@st.cache_resource
def load_model():
    try:
        model = joblib.load("model.pkl")  # Ensure this file exists
        return model
    except FileNotFoundError:
        st.error("‚ö†Ô∏è model.pkl file not found! Please place the trained model in the same folder.")
        return None

model = load_model()

if uploaded_file is not None and model is not None:
    try:
        test_df = pd.read_csv(uploaded_file)
        st.success("‚úÖ File uploaded and read successfully!")

        st.subheader("üîç Test Data Preview")
        st.dataframe(test_df)

        st.subheader("üìà Predicting Prices...")
        predictions = model.predict(test_df)

        # Add predictions to dataframe
        result_df = test_df.copy()
        result_df["Predicted Price"] = [round(p, 2) for p in predictions]  # Rounded for display

        # Show predictions
        st.subheader("üßæ Full Predictions")
        st.dataframe(result_df)

        # Download button
        csv_download = result_df.to_csv(index=False).encode('utf-8')
        st.download_button(
            label="‚¨áÔ∏è Download Predictions as CSV",
            data=csv_download,
            file_name="predicted_prices.csv",
            mime="text/csv"
        )

    except Exception as e:
        st.error(f"‚ùå Error during prediction: {e}")
elif uploaded_file is None:
    st.info("Please upload a .csv file to begin.")

#!pip install streamlit